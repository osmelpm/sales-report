import{r as u,j as t,C as w,a as B,L as O,B as D,p as M,b as R,c as $,d as A,F as L,e as g,R as F,f as j,g as T,h as k,i as I}from"./vendor.0df96d68.js";const q=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function l(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=l(r);fetch(r.href,a)}};q();const K=o=>{const[c,l]=u.exports.useState([]),[s,r]=u.exports.useState(!1),[a,d]=u.exports.useState(null);return u.exports.useEffect(()=>{(async()=>{try{r(!0);const n=await fetch(o);if(!n.ok)throw{status:n.status,statusText:n.statusText||"Error del servidor"};const m=await n.json();l(m["monthly-sells"]),d(null)}catch(n){d(n),l([])}finally{r(!1)}})()},[o]),{data:c,error:a,loading:s}},b=u.exports.createContext(),U=({children:o})=>{const{data:c,error:l,loading:s}=K("https://interview-2022.herokuapp.com/charts"),[r,a]=u.exports.useState(""),[d,h]=u.exports.useState(""),[n,m]=u.exports.useState(""),[p,f]=u.exports.useState([]),y={data:c,error:l,loading:s,category:r,setCategory:a,product:d,setProduct:h,brand:n,setBrand:m,chart:p,setChart:f};return t(b.Provider,{value:y,children:o})};w.register(B,O,D,M,R,$);const z={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Sales By Month for:"},layout:{margin:{top:10}}}};function G({data:o}){return t(A,{options:z,data:o})}const H=()=>{const{data:o,chart:c,error:l,loading:s}=u.exports.useContext(b);let r=c.length>1?c:o,a=r.map(n=>n.month);const d=r.map(n=>n==null?void 0:n.products.reduce((p,f)=>p+f.amount,0));return t("div",{className:"chart-area",children:s?t("h3",{children:"Cargando..."}):l?t("h3",{children:l.statusText}):t(L,{children:t(G,{data:{labels:a,datasets:[{label:"Cantidad de ventas",data:d,backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})})};const J=()=>g("div",{className:"avatar__container",children:[t("div",{className:"circle"}),t("h3",{children:"User Name"})]}),Q=()=>g("nav",{className:"navbar__container",children:[t("h3",{className:"menu",children:"Menu"}),t(J,{}),t("h3",{className:"title",children:"Sales Report"})]}),S=({label:o,handleChange:c,options:l})=>g("div",{children:[t("label",{htmlFor:`${o}-id`,children:o}),g("select",{name:o,onChange:c,children:[t("option",{value:"",children:"------------"}),l.map(s=>t("option",{value:s,children:s},`${s} + _id`))]})]});const V=()=>{const{data:o,error:c,loading:l,category:s,setCategory:r,product:a,setProduct:d,brand:h,setBrand:n,setChart:m}=u.exports.useContext(b);console.log(o);const p=new Set,f=new Set,y=new Set;o.forEach(e=>{e.products.forEach(i=>p.add(i.category))});let x=s?[]:o;s&&o.forEach(e=>{const i=e.products.filter(v=>v.category===s);x.push({month:e.month,products:i})}),x.forEach(e=>{e.products.forEach(i=>{f.add(i.product)})});let C=a?[]:o;a&&x.forEach(e=>{const i=e.products.filter(v=>v.product===a);C.push({month:e.month,products:i})}),C.forEach(e=>{e.products.forEach(i=>y.add(i.brand))});let _=h?[]:o;h&&C.forEach(e=>{const i=e.products.filter(v=>v.brand===h);_.push({month:e.month,products:i})});const E=[],N=[],P=[];return p.forEach(e=>E.push(e)),f.forEach(e=>N.push(e)),y.forEach(e=>P.push(e)),t("div",{className:"selects__container",children:l?"Cargando datos":c?t("h3",{children:c.statusText}):g(L,{children:[t(S,{label:"Categor\xEDa:",handleChange:e=>r(e.target.value),options:E}),t(S,{label:"Producto:",handleChange:e=>d(e.target.value),options:N}),t(S,{label:"Marca:",handleChange:e=>n(e.target.value),options:P})]})})};function W(){return g("div",{className:"container",children:[t(Q,{}),t(V,{}),t(F,{children:t(j,{path:"/monthly-sells/",element:t(H,{})})})]})}T.render(t(k.StrictMode,{children:t(I,{children:t(U,{children:t(W,{})})})}),document.getElementById("root"));
